package com.jasminesloan.week1_java;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.graphics.Color;
import android.text.InputType;
import android.view.Menu;
import android.view.View;
import android.view.inputmethod.InputMethodManager;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.TextView;

public class MainActivity extends Activity {

	LinearLayout layout;
	LinearLayout.LayoutParams params;
	TextView combinedTotals;
	TextView ps3Result;
	TextView xboxResult;
	EditText ps3et;
	EditText xboxet;
	boolean btnPressed = true;
	int ps3Calculation;
	int xboxCalculation;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        
        //Sets Layout
        layout = new LinearLayout(this);
        layout.setOrientation(LinearLayout.VERTICAL);
        
        //Sets width and height
        params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT);
        layout.setLayoutParams(params);
        
        //Sets information for the user
        TextView informationText = new TextView(this);
        informationText.setText("Find out how much money you spent on new $59.99 " + getString(R.string.MacBookAir) + " and " 
        																+ getString(R.string.MacBookPro) + " games this year.");
        informationText.setTextSize(20.0f);
        informationText.setTextColor(Color.BLACK);//Text Color
        layout.addView(informationText);
        
        //*****PS3 EDIT TEXT & BUTTON***** 
        //EditText where user enters amount of total games purchased
        ps3et = new EditText(this);
        ps3et.setInputType(InputType.TYPE_CLASS_NUMBER); //opens device numpad 
        ps3et.setHint("Enter Amount of PS3 Games Bought");
        
        //Button to gather total amount spent on new PS3 games
        Button ps3btn = new Button(this);
        ps3btn.setText("Get PS3 Total");
        ps3btn.setOnClickListener(new View.OnClickListener() {

			@Override
			public void onClick(View v) {				
				//Hides keyboard after "Get Total" is pressed
				if (btnPressed){
					InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
					imm.hideSoftInputFromWindow(ps3et.getWindowToken(), 0);
				}else{
					ps3Result.setText("There is a bug in the code.");
				}

				int playstation = getResources().getInteger(R.integer.playstation_3);

				//Loop checks for the amount of games entered
				try {
					for (int i = 0; i < playstation; i++){

						int entry = Integer.parseInt(ps3et.getText().toString());

						ps3Calculation = (1*playstation)*entry;
						//Presents calculated amount
						ps3Result.setText("Total amount spent on new PS3 games: " + "$" + ps3Calculation + ".00");
						ps3Result.setTextSize(15.0f); //Text Size
						ps3Result.setTextColor(Color.RED);//Text Color
					}
				} catch (NumberFormatException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		});
        
        LinearLayout ps3Form = new LinearLayout(this);
        ps3Form.setOrientation(LinearLayout.VERTICAL);
        lp = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
        ps3Form.setLayoutParams(params);
        
        //Adds Button and Text to View
        ps3Form.addView(ps3et);
        ps3Form.addView(ps3btn);
        
        layout.addView(ps3Form); //End
        
        //*****XBOX EDIT TEXT & BUTTON*****
        //EditText where user enters amount of total games purchased
        xboxet = new EditText(this);
        xboxet.setInputType(InputType.TYPE_CLASS_NUMBER); //opens device numpad 
        xboxet.setHint("Enter Amount of XBOX Games Bought");
        
        //Button to gather total amount spent on new XBOX games
        Button xboxbtn = new Button(this);
        xboxbtn.setText("Get 360 Total");
        xboxbtn.setOnClickListener(new View.OnClickListener() {

			@Override
			public void onClick(View v) {				
				//Hides keyboard after "Get Total" is pressed
				if (btnPressed){
					InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
					imm.hideSoftInputFromWindow(ps3et.getWindowToken(), 0);
				}else{
					xboxResult.setText("There is a bug in the code.");
				}


				int xbox360 = getResources().getInteger(R.integer.xbox_360);

				//Loop checks for the amount of games entered
				try {
					for (int i = 0; i < xbox360; i++){

						int entry = Integer.parseInt(xboxet.getText().toString());

						xboxCalculation = (1*xbox360)*entry;
						//Presents calculated amount
						xboxResult.setText("Total amount spent on new Xbox 360 games: " + "$" + xboxCalculation + ".00");
						xboxResult.setTextSize(15.0f); //Text Size
						xboxResult.setTextColor(Color.RED);//Text Color
					}
				} catch (NumberFormatException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		});
        
        LinearLayout xboxForm = new LinearLayout(this);
        xboxForm.setOrientation(LinearLayout.VERTICAL);
        lp = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
        xboxForm.setLayoutParams(params);
        
        //Adds Text and Button to View
        xboxForm.addView(xboxet);
        xboxForm.addView(xboxbtn);
        
        layout.addView(xboxForm); //END 
        
        //*****TOTALS BUTTON*****
        Button totalsBtn = new Button(this);
        totalsBtn.setText("Get Combined Total");
        totalsBtn.setOnClickListener(new View.OnClickListener() {

			@Override
			public void onClick(View v) {
				gatherTotals();

			}
		});
        
        LinearLayout totalsForm = new LinearLayout(this);
        totalsForm.setOrientation(LinearLayout.VERTICAL);
        params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
        totalsForm.setLayoutParams(params);
        
        totalsForm.addView(totalsBtn);
        
        layout.addView(totalsForm); //END 
        
        //Displays Playstation Result
        ps3Result = new TextView(this);
        layout.addView(ps3Result);
        
        //Displays Xbox Result
        xboxResult = new TextView(this);
        layout.addView(xboxResult);
        
        //Displays Totals Result
        combinedTotals = new TextView(this);
        layout.addView(combinedTotals);

        //adds all content to View
        setContentView(layout);
    }
    
    //*****FUNCTION FOR GATHERING TOTALS*****
    public void gatherTotals(){
    	boolean combinedTotal = true;

    	if (combinedTotal){
    		combinedTotals.setText("Your combined total is: " + "$" + (ps3Calculation + xboxCalculation) + ".00");
    		combinedTotals.setTextSize(15.0f); //Text Size
    		combinedTotals.setTextColor(Color.RED);//Text Color
    	}else{
    		System.out.println("The programmer who coded this app messed up.");
    	}
    }
    
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
    
}
